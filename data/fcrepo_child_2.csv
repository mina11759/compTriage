issuekey,title,description,component_1,component_2,component_3,f4-audit,f4-auth,f4-camel,f4-core,f4-import-export,f4-java-client,f4-jmeter,f4-ldp,f4-message-consumer,f4-oaiprovider,f4-ontology,f4-transform,f4-vagrant,f4-webapp-plus,legacy - FeSL,legacy - Fedora,legacy - GSearch,legacy - OAIProvider,legacy - OSGi,legacy - Trippi,legacy - community extensions,legacy - java-client
FCREPO-599,ImageManipulation service fails with FeSL enabled,"Integration tests which use the imagemanip service fail when FeSL is enabled. Call to the imagemanip service hang until eventually timing out.  With FeSL enabled, an individual request to http://localhost:8080/imagemanip/ImageManipulation?op=resize&newWidth=50&url=http://localhost:8080/tomcat.gif hangs and eventually times out.  Workarounds for imagemanip: - remove fedora.war - disable fesl - comment out calls to PopulatePolicyDatabase.addDocuments(); and pdp = new PDP(config.getDefaultPDPConfig()); in MelcoePDPImpl",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-615,"With FeSL enabled, authentication is required for every resource","When FeSL in enabled in the installer, the generated Fedora web.xml sets the AuthFilterJAAS with a wildcard url-pattern which requires authentication for every resource, even if APIA-Auth is not required.  For example, if you set API-A authentication to false (the installer default), but enable FeSL, requests to API-A resources such as http://localhost:8080/fedora/search still require authentication. Also, requests to resources such as http://localhost:8080/fedora/ri/index.xsl also require authentication.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-632,FeSL Special Topics Review,Review branch for 2010-02-09 Special Topics review of FeSL,Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-636,Enable policy enforcement by declaration in RELS-EXT and RELS-INT,"Once policies are represented in the repository as objects (FCREPO-577), we should enable objects and datastreams to declare or ""subscribe"" to policies via RELS-EXT and RELS-INT (assuming an as-yet-to-be-decided predicate).",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-660,Regression: setting FEDORA_HOME via context-param fails,"The setting of FEDORA_HOME is supported by three means: 1) fedora.home context init-param in web.xml 2) via a system property (e.g. -Dfedora.home=/foo) 3) environment variable (e.g. export FEDORA_HOME=/bar)  To reproduce: define fedora.home in web.xml, ensure that the FEDORA_HOME environment variable is not set, start Fedora. Tomcat should report ""SEVERE: Error filterStart"", Jetty reports ""failed AuthFilterJAAS javax.servlet.ServletException: FEDORA_HOME environment variable not set"".  Quick workaround if FeSL is not being used is to simply comment out the AuthFilterJAAS filter from Fedora's web.xml.  Prior to FeSL, none of the servlet filters required the value of FEDORA_HOME. Moreover, if the value of FEDORA_HOME is set via system property or environment variable, the problem does not manifest itself. Currently, ServletController retrieves the fedora.home context-param and sets the ""servlet.fedora.home"" System Property to make the value available to Constants.FedoraHome. However, if we can't guarantee that ServletController is loaded first, then the fedora.home context-param will not be available to the filters.  Note: the load-on-startup element only controls servlet load order, and doesn't ensure a servlet will load before any of the filters.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-664,Drop the old servletfilter AuthN package in favor of FeSL's AuthN,"Default to using org.fcrepo.server.security.jaas.* (FeSL's authN) instead of org.fcrepo.server.security.servletfilters.* (original authN).  This includes: 1) Making FeSL's authN the out-of-box authN configuration, with xml user file pre-configured 2) Deprecating the old servlet filters (or completely removing them ...?) 3) Updating Fedora's system docs to explain how to use/configure/customize this  See related discussion here: http://www.mail-archive.com/fedora-commons-developers@lists.sourceforge.net/msg00779.html",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-668,Improved Authentication Challenge Control,"From https://fedora-commons.org/confluence/display/~cwilper/2010/03/18/Authentication+Challenge+Control+-+A+Thought+Experiment  Fedora's SOAP API has historically been split into two: API-A and API-M. The REST API, being resource-oriented, naturally isn't. And the control over which endpoints can be set to require authentication is inconsistent across the two. The old ""Authenticate for API-A? Authenticate for API-M?"" options no longer make sense when you look at Fedora's APIs as a whole.  Here's one way the situation could be improved.     1. For the SOAP API (all read-oriented and write-oriented methods), always require authentication.    2. For the REST API, on a per-verb basis (POST/PUT/DELETE/GET), offer the following options at install time:          1. Proactive Challenge: Always require authentication.          2. Reactive Challenge: Only require authentication if an un-authenticated request failed due to AuthZ rules. ",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-671,Allow use of FeSL AuthN without FeSL AuthZ during install,"While FeSL is in the experimental phase, it would be helpful if people could try out the authentication part without the authorization part.  It is possible to configure this after the fact today, as evidenced by this thread: http://article.gmane.org/gmane.comp.cms.fedora-commons.devel/1609  ..but the process is manual.  This improvement would add an install-time option to enable FeSL authentication without needing to enable its authorization.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-736,System test failures when fesl authn enabled (fesl authz disabled),FeSL AuthN is the default for 3.4 (see FCREPO-671) but this results in some integration test failures:   Eg ConfigA  Failed tests:   testFindObjects(org.fcrepo.test.api.TestRESTAPI)   testResumeFindObjects(org.fcrepo.test.api.TestRESTAPI)   testFindObjectsBadSyntax(org.fcrepo.test.api.TestRESTAPI)   testUpload(org.fcrepo.test.api.TestRESTAPI)  Failed tests:   testXACMLAPIMAccess(org.fcrepo.test.api.TestXACMLPolicies)  Tests in error:   testXACMLMultiOwnerAccess(org.fcrepo.test.api.TestXACMLPolicies)   testXACMLUnmodifiableContentModel(org.fcrepo.test.api.TestXACMLPolicies)  Not investigated the reason for these - could be issues with the tests rather than fesl AuthN?,Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-753,Credentials not passed through for API-A REST calls when FeSL AuthN enabled,"With FeSL AuthN enabled and API-A auth required turned off, it is not possible to authenticate for API-A REST calls.    Tested by supplying pre-emptive auth credentials (BASIC, DIGEST) using WizTools.org RESTClient - Fedora is not picking up the supplied login ID.  One impact of this is that if an object is deleted, access is (correctly) restricted by a XACML policy for unauthenticated users, however it is not possible to authenticate (eg as administrator) to view the object profile.  Thus once an object is deleted in the web admin client, the client can no longer retrieve the resource.  It would seem that the fix for FCREPO-615, http://fedora-commons.svn.sourceforge.net/viewvc/fedora-commons?revision=8467&view=revision, results in skipping retrieving preemptively-supplied credentials.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-754,No authentication for UserServlet with FeSL AuthN and API-A auth turned off,The UserServlet does not require authentication (and will not pick up any pre-emptively supplied credentials).  See FCREPO-753 also.,Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-763,Ability to validate FeSL policies,"The validate-policy.sh/.bat script that comes with Fedora assumes the v1 XACML schema, but FeSL policies use the v2 XACML schema.  Although FeSL Authorization is still considered experimental, it would be good to have a way for people to validate the newer-style policies.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-770,FeSL invalid XACML results in changes to FESLPOLICY datastream even though API call fails,"Adding/editing an invalid FESLPOLICY datastream results in a failure of the API call, however the changes are saved.  This is due to the order in which policies are propagated to dbxml - after the main API call has been made.  Need to cater for the situation where both the API call and/or the propagation to dbxml (where the validation takes place) could fail.  Probably not a blocker for 3.4.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-790,FeSL AuthN fedora-users.xml not closed properly after each use,"This can lead to the operating system running out of file handles.  Reported by Janna Wemekamp on the fcrepo-user list.  More information and reproduce: http://fedora-commons.1317035.n2.nabble.com/fcrepo-user-FedoraCommons-3-4-with-Akubra-Low-Level-Storage-Java-crash-in-REST-API-s-getNextPID-td5480759.html  This problem does not occur when the old AuthN (non-FeSL) is used, so if using fedora-users.xml with Fedora 3.4, it is recommended to answer ""false"" to ""Enable FeSL AuthN?"" at install time.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-792,Cache fedora-users.xml for FeSL AuthN,"As noted in FCREPO-790, FeSL's fedora-users.xml authentication implementation reads this file for every request to the repository.  This file should not have to be re-read and parsed for every request -- the info it contains should be cached in some way for performance.  For example, a reasonable out-of-box behavior would be to refresh from the file if it has been > 60 seconds since the last request.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-851,FeSL's implementation of XACML Hierarchical Resource Profile is non-compliant,"FeSL makes use of the XACML Hierarchical Resource Profile (HRP) - http://docs.oasis-open.org/xacml/2.0/access_control-xacml-2.0-hier-profile-spec-os.pdf and http://docs.oasis-open.org/xacml/3.0/xacml-3.0-hierarchical-v1-spec-cs-01-en.pdf  This is used in evaluation permissions of members of collections, particularly when evaluating the precedence of policies in a hierarchy of collections and resources.  FeSL uses the ""URI path"" variant of this (as opposed to parent and ancestor attributes).  The XACML specification states that the resource-id used in the path to the resource (in the request context, and in the policy) MUST be a URI.    However FeSL specifies resource-id attribute values as (for example, individual path components are PIDs):  /ns:TopCollection/ns:SubCollection/ns:someResource  ... which is not a URI  It could form the ""path"" component if a suitable URI scheme was chosen for this hierarchical resource-id within FeSL.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-870,XmlUsersFileModule depends on FEDORA_HOME environment variable,"org.fcrepo.server.security.jaas.auth.module.XmlUsersFileModule depends on the FEDORA_HOME environment variable being set, rather than following the convention of using org.fcrepo.common.Constants.FEDORA_HOME which attempts to determine the value of ""Fedora Home"" as follows:          * servlet.fedora.home system property (checked first)          * fedora.home system property (checked next) or the          * FEDORA_HOME environment variable (checked last).  As a result, this can cause Fedora to fail to start if the environment variable is not set. In scenarios where the FEDORA_HOME environment variable is set and multiple Fedoras are deployed to the same system, they will all end up (unintentionally) using the same copy of FEDORA_HOME/server/config/fedora-users.xml file.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-880,Upgrade FeSL to use Berkeley DB XML 2.5.16,Upgrade so that FeSL can use the later version of dbxml.,Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-884,Enhance FilePolicyIndex,"FeSL has a default policy index implementation of FilePolicyIndex (since 3.5) .  This is a basic memory-cached, file-backed policy index.  It always returns the full set of policies known to it (it does no filtering based on the request) - similar to the legacy XACML implementation.  As such it is suitable for a relatively small number of policies.  This index could be enhanced to provide indexing and better caching to provide a performant alternative to an XML database-backed policy index.  The full functionality of an XML database is not required to support FeSL - what is required is indexed access to policies based on (configurable) resource, subject, action, environment attributes.  An option could be to do the indexing in an SQL database.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-933,Refactor FeSL and existing XACML attribute finder modules,"In 3.5, the FeSL Relationships attribute finder module was enhanced to allow relationship-query-based attributes; and a similar relationships attribute finder module was added for the existing XACML implementation.  As these both conform to the same XACML interface, this code should be refactored to provide a single attribute finder module, with Spring configuration.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1020,Out-of-memory exceptions due to FeSL PEP buffering datastreams in memory,"See report from Greg Jansen here:  http://sourceforge.net/mailarchive/message.php?msg_id=28272473  The code looks like it is buffering the datastream in memory, which is clearly a bad thing.  It should be passing the stream through.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1042,FeSL authN sessioning is undocumented ,"The authN sessioning (based on a ""secret"" HTTP header) capability in the FeSL authN servlet filter is not documented except in the source code. ",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1044,modifyObject incorrectly uses the ownerID XACML resource attributeID URI for the new ownerID property supplied by the API method,"1) Legacy XACML incorrectly uses the resource attribute ID for ownerID for the new ownerID property - it should supply the new ownerID property as a different URI (see for example the way state is handled - different URIs for existing resource state and new resource state). 2) FeSL does the same  Note that this bug will only show up if an ownerID value is supplied as a parameter of the modifyObject method - if none is present then the legacy XACML engine will pick up the existing value from the object.  FeSL's default configuration is to supply this value using the URI ""info:fedora/fedora-system:def/model#ownerId"" - which will always give the current (not the new) ownerID.  This means that modifyObject API operations cannot be restricted by policies based on the existing ownerID of the object, as the value from the request will be used if present instead of the existing object's ownerID.",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1158,PolicyIndexRebuilder fails with a NullPointerException in FCRepo 3.6,"The PolicyIndexRebuilder does not have access to the PolicyIndex it needs, because the RebuildServer does not load the requisite Spring beans. This leads to a NullPointerException.  It can be worked around by copying the PolicyIndex configuration, and configuring an additional bean for the rebuilder like so:  <bean id=""org.fcrepo.server.security.xacml.pdp.data.PolicyIndexRebuilder2""             class=""org.fcrepo.server.security.xacml.pdp.data.PolicyIndexRebuilder"" >             <property name=""policyIndex"" ref=""org.fcrepo.server.security.xacml.pdp.data.PolicyIndex"" />         </bean>",Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1159,FESL Action mapping is misconfigured by default,The default FESL configuration has a typo in the ContextUtil spring configuration: It sets the actionMap property instead of the actionValueMap property.  The result is that FESL is not mapping the granular action ids in the XACML evaluation context.  It can be fixed by simply editing the Spring configuration to use the correct property name. ,Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-1166,"XACML documentation uses out of date vocabulary, doesn't show how to get the content model inside of a policy.",Effects Fedora 3.0 to 3.6  References an old vocabulary.  https://wiki.duraspace.org/display/FEDORA36/Fedora+XACML+Policy+Writing+Guide  Should also include this information https://jira.duraspace.org/browse/FCREPO-477  Note that https://jira.duraspace.org/browse/FCREPO-477 the use of res-ext field hasModel isn't shown in the repositories vocabulary.txt ,Fedora,FeSL,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0
FCREPO-986,Increased flexibility to derive the configuration of a repository,"Discussion at the committers' Skype meeting of 26 Jul 2011 included questions about the flexibility of Fedora's configuration mechanism. This issue is a holding tank for that discussion, which will go farther as time allows. Some points raised:  1) The purpose of FEDORA_HOME is not entirely clear and agreed. FEDORA_HOME contains configuration, slowly-changing state (e.g. repository-wide policies), and (often) quickly-changing state like the primary object store.  2) Fedora's installation procedures are bound up with configuration. We're not perfectly sure what a perfect installation procedure looks like, and the best road forward for configuration may depend on that. Chris mentioned the desire for an easy way for (human) installers to align Fedora's state on the filesystem with FHS-- e.g. configuration in etc, changing state in var, and so forth. Eddie pointed out that this is all very well-- for *nix. Chris also pointed out that many Java webapps offer a means by which a simple default configuration is engaged if no alternative  3) There are some questions about technique and the best use of Spring to fulfill our designs for configuration.  4) Eddie mentioned the idiom often found in scripted webapps in which code is placed on the filesystem (or in a container) and then configuration (as a human act) occurs on the first load of the app. It was widely agreed that this is a very pleasant way to deploy and would be attractive to many.  5) Adam make the wild-eyed claim that OSGi offers powerful configuration services, and that it would be as well to move forward with that in mind and be prepared to shift configuration into that framework, since OSGi is where Fedora is headed.  6) It was generally agreed that more discussion is in order!  ",Fedora,FeSL,Trippi,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0
FCREPO-791,Re-work of Fedora Client CLI tools ,"Fedora's CLI utilities should be reworked so that:  - We use one client library throughout (and stop using the old FedoraClient) - Batch operations are supported throughout  This can be accomplished a variety of ways.  Here's a proposal:  A) We use Kai's fedora-cli project as a replacement for the existing client batch/shell scripts. B) Kai's fedora-cli project uses the new MediaShelf-developed java Fedora Client C) Batch operations become scripts passed to fedora-cli.  This would subsume the existing batchmodify functionality, and support the batch purge use case highlighted in FCREPO-756",Fedora,java-client,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-808,REST getNextPid response does not include default namespace,"I was updating my REST API code for the default namespaces in Fedora 3.4 and discovered that the result from getNextPid does not have the default namespace that I expected it would.  It looks like this is being generated incorrectly.   Here's a sample result:  <pidList  xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://www.fedora.info/definitions/1/0/management/ http://myfedora.server.edu:8080/getNextPIDInfo.xsd"">   <pid>changeme:226</pid> </pidList> ",Fedora,java-client,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-831,Consistently use the new fedora-client in all code (test and server) that REST API is exercised,"...and as part of this, the old FedoraClient class should be marked as deprecated.",Fedora,java-client,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-887,SOAP + MTOM,MTOM:  http://www.w3.org/TR/soap12-mtom/  is now the definitive standard on how to transmit non-XML information through SOAP. It would be well for Fedora's SOAP Web services to support MTOM.,Fedora,java-client,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-1086,Provide new Fedora client for tests and provide one example test,Provide the new Fedora client for use with repository integration tests. This does _not_ entail moving or merging source code. It only implies using Maven to make the new Fedora client available and writing one sample test using it to be a model for others.,Fedora,java-client,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-1087,Decide on whether to use Jersey or CXF for new Fedora client.,"In order to move forward with the use of the new Fedora client for integration tests, we need to decide on whether to continue to use Jersey as the Web services client library therein or switch, as the server has, to using Apache CXF.",Fedora,java-client,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-1088,Convert all REST API integration tests to use new Fedora client,"Once a decision has been reached on which Web services library to use for the new Fedora client, all of the integration tests that work against the REST API should be converted over to use it.",Fedora,java-client,NONE,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
FCREPO-825,Complete Maven hosting migration to Sonatype with sync to Maven Central,"The primary goal of this epic is to migrate Fedora's Maven artifacts completely to Sonatype and sync them to Maven Central, adhering to as much of the Sonatype Central Sync Requirements as possible. In particular, we aspire to have no library dependencies that are not hosted in Maven Central. We also want to take advantage of Sonatype's snapshot repository hosting option as an automatic part of our continuous integration builds that run at bamboo.duraspace.org.  For reference, here is the Sonatype OSS Maven Repository Usage Guide, which also includes a section on the latest Central sync requirements:    http://docs.sonatype.org/x/SQBl  ...and here is the original Sonatype hosting ticket for org.fcrepo:    https://issues.sonatype.org/browse/OSSRH-307",Fedora,java-client,Trippi,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1
FCREPO-1015,"Define ""manual upload fitness criteria"" for non-central third-party libs",None,Fedora,java-client,Trippi,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1
FCREPO-1016,Document all third-party libs not in Maven Central,None,Fedora,java-client,Trippi,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1
FCREPO-1017,Automatically deploy artifact snapshots to Sonatype snapshot repo via Bamboo,None,Fedora,java-client,Trippi,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1
